---
import { navigationItems } from '../data/navigation';

const currentPath = Astro.url.pathname;
---

<header id="site-header" class="sticky top-0 z-50 transition-all duration-300" style="background-color: var(--color-bg); border-bottom: 1px solid var(--color-border);">
  <nav class="max-w-6xl mx-auto px-6 py-6">
    <div class="flex items-center justify-between">
      <!-- Logo/Brand -->
      <a href="/" class="text-xl font-semibold no-underline hover:no-underline" style="color: var(--color-text);">
        RG
      </a>

      <!-- Desktop Navigation -->
      <ul class="hidden md:flex items-center gap-8">
        {navigationItems.map((item) => {
          const isActive = currentPath === item.href ||
            (item.href !== '/' && currentPath.startsWith(item.href));

          return (
            <li>
              <a
                href={item.href}
                class={`text-sm font-medium transition-colors duration-200 no-underline`}
                style={isActive ? 'color: var(--color-link);' : 'color: var(--color-text);'}
                onmouseenter="this.style.color='var(--color-link)';"
                onmouseleave={`this.style.color='${isActive ? 'var(--color-link)' : 'var(--color-text)'}'`}
              >
                {item.name}
              </a>
            </li>
          );
        })}
      </ul>

      <!-- Mobile Navigation Toggle -->
      <button
        id="mobile-menu-toggle"
        class="md:hidden p-2 rounded-md transition-colors"
        style="color: var(--color-text);"
        onmouseenter="this.style.backgroundColor='var(--color-hover)';"
        onmouseleave="this.style.backgroundColor='transparent';"
        aria-label="Toggle menu"
      >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
    </div>

    <!-- Mobile Navigation Menu -->
    <ul id="mobile-menu" class="hidden md:hidden flex-col gap-4 mt-4 pb-2">
      {navigationItems.map((item) => {
        const isActive = currentPath === item.href ||
          (item.href !== '/' && currentPath.startsWith(item.href));

        return (
          <li>
            <a
              href={item.href}
              class={`block text-sm font-medium transition-colors duration-200 no-underline`}
              style={isActive ? 'color: var(--color-link);' : 'color: var(--color-text);'}
              onmouseenter="this.style.color='var(--color-link)';"
              onmouseleave={`this.style.color='${isActive ? 'var(--color-link)' : 'var(--color-text)'}'`}
            >
              {item.name}
            </a>
          </li>
        );
      })}
    </ul>
  </nav>
</header>

<script>
  // Mobile menu toggle
  const toggle = document.getElementById('mobile-menu-toggle');
  const menu = document.getElementById('mobile-menu');

  toggle?.addEventListener('click', () => {
    menu?.classList.toggle('hidden');
    menu?.classList.toggle('flex');
  });

  // Glassmorphism on scroll
  const header = document.getElementById('site-header');

  const applyGlassmorphism = () => {
    if (window.scrollY > 50) {
      if (header) {
        header.style.backgroundColor = 'rgba(250, 250, 248, 0.8)';
        header.style.backdropFilter = 'blur(12px)';
        header.style.boxShadow = 'var(--shadow-sm)';
      }
    } else {
      if (header) {
        header.style.backgroundColor = 'var(--color-bg)';
        header.style.backdropFilter = 'none';
        header.style.boxShadow = 'none';
      }
    }
  };

  // Apply on scroll
  window.addEventListener('scroll', applyGlassmorphism);

  // Apply on page load
  applyGlassmorphism();
</script>
